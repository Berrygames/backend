generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
}

model UserBerries {
  id        String   @id @default(uuid())
  userId    String
  guildId   String
  countCash Int      @default(0)
  countBank Int      @default(0)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([userId, guildId])
  @@index([guildId])
}

model Role {
  id        String   @id @default(uuid())
  roleId    String   
  guildId   String 
  amount    Int      @default(0) // Berry amount awarded for having this role
  interval  Int     @default(0) // Interval in hours for awarding berries (0 means no interval)
  collections UserRoleIncome[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([roleId, guildId])
  @@index([guildId])
}

model UserRoleIncome {
  id       String   @id @default(uuid())
  userId    String
  guildId   String
  roleDbId  String 
  role      Role    @relation(fields: [roleDbId], references: [id])
  lastClaimed DateTime @default(now())
  createdAt DateTime @default(now())

  @@unique([userId, guildId, roleDbId])
  @@index([guildId])
}